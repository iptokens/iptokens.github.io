(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DisplayFields"],{"5b62":function(t,n,e){},"8c95":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"set-convert-times"},[e("div",{staticClass:"box"},[e("div",{staticClass:"Whitelistfunction"},[e("span",[t._v("累计消耗IP: "),e("span",{staticClass:"bull"},[t._v(" "+t._s(t.burnIPAmount))])]),e("span",[t._v("累计使用的PIN:"),e("span",{staticClass:"bull"},[t._v(" "+t._s(t.usePinAmount))])]),e("span",[t._v("PIN余额: "),e("span",{staticClass:"bull"},[t._v(" "+t._s(t.balanceOf))])]),e("span",[t._v("黑洞IP: "),e("span",{staticClass:"bull"},[t._v(" "+t._s(t.ipbalanceOf))])])]),e("span",[t._v("执行销毁")]),e("div",{staticClass:"input-container input-append"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:"输入数值"},domProps:{value:t.amount},on:{input:[function(n){n.target.composing||(t.amount=n.target.value)},t.input]}}),e("span",[t._v("PIN")])]),e("div",{staticClass:"Destruction"},[e("span",[t._v("销毁数量 :")]),e("span",{staticClass:"bull"},[t._v(" "+t._s(t.DestructionAmount.toFixed(4))+" ")]),e("span",[t._v(" IP")])]),e("van-button",{on:{click:t.burnByWei}},[t._v("确定")])],1)])},s=[],o=(e("a9e3"),e("b680"),e("96cf"),e("1da1")),r={data:function(){return{amount:"",burnIPAmount:0,usePinAmount:0,DestructionAmount:0,allowance:0,balanceOf:0,ipbalanceOf:0}},created:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var e,a,s,o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t.$contracts),n.next=3,t.$contracts.Controller.methods.burnIPAmount().call({from:t.$address});case 3:return e=n.sent,n.next=6,t.$contracts.Controller.methods.usePinAmount().call({from:t.$address});case 6:return a=n.sent,n.next=9,t.$contracts.PinToken.methods.allowance(t.$address,t.$contracts.Controller._address).call({from:t.$address});case 9:return s=n.sent,n.next=12,t.$contracts.PinToken.methods.balanceOf(t.$contracts.Controller._address).call({from:t.$address});case 12:return o=n.sent,n.next=15,t.$contracts.IPToken.methods.balanceOf("0x000000000000000000000000000000000000dead").call({from:t.$address});case 15:r=n.sent,t.burnIPAmount=e.fromWei().toFixed(4),t.usePinAmount=a.fromWei().toFixed(4),t.allowance=s.fromWei().toFixed(4),t.balanceOf=o.fromWei().toFixed(4),t.ipbalanceOf=r.fromWei().toFixed(4);case 21:case"end":return n.stop()}}),n)})))()},input:function(){var t=this;""==this.amount?this.DestructionAmount=0:this.pinOrip(this.amount).then((function(n){t.DestructionAmount=n}))},pinOrip:function(t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[n.$contracts.PinToken._address,n.$contracts.IPToken._address],e.next=3,n.$contracts.Router.methods.getAmountsOut(t.toWei(),a).call();case 3:return s=e.sent,o=a.length-1,e.abrupt("return",s[o].fromWei());case 6:case"end":return e.stop()}}),e)})))()},burnByWei:function(){var t=this;if(this.amount.length<=0)return vant.Toast.fail("输入数字");if(Number(this.balanceOf)<Number(this.amount))return vant.Toast.fail("PIN余额不足");var n=this.$contracts.Controller.methods.burnByWei(this.amount.toWei());n.call({from:this.$address},(function(e,a){e||n.send({from:t.$address}).on("transactionHash",(function(t){vant.Toast.loading({message:"交易中...",forbidClick:!0,duration:0,loadingType:"spinner"})})).on("receipt",(function(n){vant.Toast.success("成功"),t.amount="",t.init()})).on("error",(function(n){vant.Toast.fail("失败"),t.amount=""}))}))}}},i=r,c=i,u=(e("8f67"),e("2877")),l=Object(u["a"])(c,a,s,!1,null,"01a845f4",null);n["default"]=l.exports},"8f67":function(t,n,e){"use strict";e("5b62")}}]);